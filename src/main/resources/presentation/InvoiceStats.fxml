<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<VBox xmlns="http://javafx.com/javafx/11.0.1" 
      xmlns:fx="http://javafx.com/fxml/1" 
      fx:controller="presentation.InvoiceStatsController"
      spacing="25" style="-fx-padding: 30;">
    
    <!-- Header -->
    <VBox spacing="5">
        <Label text="BÁO CÁO THỐNG KÊ HÓA ĐƠN" 
               style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" />
        <HBox spacing="10" alignment="CENTER_LEFT">
            <Label fx:id="statusLabel" text="Sẵn sáng" 
                   style="-fx-text-fill: #7f8c8d;" />
            <Region HBox.hgrow="ALWAYS" />
            <Button fx:id="refreshStatsButton" text="Làm mới thống kê" 
                    onAction="#refreshStats"
                    style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-padding: 8 16;" />
        </HBox>
    </VBox>
    
    <!-- Statistics Cards -->
    <HBox spacing="20" alignment="CENTER">
        
        <!-- Invoice Type Statistics -->
        <VBox spacing="15" alignment="CENTER" 
              style="-fx-background-color: #ffffff; -fx-padding: 25; -fx-background-radius: 12; -fx-effect: dropshadow(gaussian, #b0b8c1, 8, 0, 0, 2);"
              prefWidth="300">
            <Label text="Thống kê theo loại" 
                   style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" />
            <Separator prefWidth="200" />
            <Label fx:id="hourlyCountLabel" text="Hóa đơn theo giờ: 0" 
                   style="-fx-font-size: 16px; -fx-text-fill: #e74c3c;" />
            <Label fx:id="dailyCountLabel" text="Hóa đơn theo ngày: 0" 
                   style="-fx-font-size: 16px; -fx-text-fill: #3498db;" />
        </VBox>
        
        <!-- Revenue Statistics -->
        <VBox spacing="15" alignment="CENTER" 
              style="-fx-background-color: #ffffff; -fx-padding: 25; -fx-background-radius: 12; -fx-effect: dropshadow(gaussian, #b0b8c1, 8, 0, 0, 2);"
              prefWidth="350">
            <Label text="Thống kê doanh thu" 
                   style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" />
            <Separator prefWidth="250" />
            <Label fx:id="totalRevenueLabel" text="Tổng doanh thu: 0 VND" 
                   style="-fx-font-size: 16px; -fx-text-fill: #27ae60; -fx-font-weight: bold;" />
            <Label fx:id="avgRevenueLabel" text="Doanh thu trung bình: 0 VND" 
                   style="-fx-font-size: 16px; -fx-text-fill: #f39c12;" />
        </VBox>
        
    </HBox>
    
    <!-- Monthly Statistics Table -->
    <VBox spacing="15" VBox.vgrow="ALWAYS" 
          style="-fx-background-color: #ffffff; -fx-padding: 25; -fx-background-radius: 12; -fx-effect: dropshadow(gaussian, #b0b8c1, 8, 0, 0, 2);">
        
        <Label text="Thống kê theo tháng/năm" 
               style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" />
        
        <TableView fx:id="monthlyStatsTable" VBox.vgrow="ALWAYS">
            <columns>
                <TableColumn fx:id="monthColumn" text="Tháng" prefWidth="120" />
                <TableColumn fx:id="yearColumn" text="Năm" prefWidth="100" />
                <TableColumn fx:id="countColumn" text="Số lượng hóa đơn" prefWidth="150" />
                <TableColumn fx:id="averageColumn" text="Trung bình thành tiền" prefWidth="200" />
            </columns>
            <placeholder>
                <VBox spacing="10" alignment="CENTER">
                    <Label text="Chưa có dữ liệu thống kê" 
                           style="-fx-text-fill: #7f8c8d; -fx-font-size: 14px;" />
                    <Label text="Thêm hóa đơn để xem thống kê theo tháng" 
                           style="-fx-text-fill: #bdc3c7; -fx-font-size: 12px;" />
                </VBox>
            </placeholder>
        </TableView>
        
    </VBox>
    
    <!-- Info Panel -->
    <VBox spacing="10" style="-fx-background-color: #e8f4f8; -fx-padding: 20; -fx-background-radius: 8;">
        <Label text="Thông tin thống kê:" style="-fx-font-weight: bold; -fx-text-fill: #2980b9;" />
        <Label text="• Thống kê được tính dựa trên tất cả hóa đơn hiện có trong hệ thống" 
               style="-fx-text-fill: #34495e;" />
        <Label text="• Doanh thu trung bình = Tổng doanh thu / Tổng số hóa đơn" 
               style="-fx-text-fill: #34495e;" />
        <Label text="• Bảng thống kê theo tháng hiển thị trung bình thành tiền của từng tháng" 
               style="-fx-text-fill: #34495e;" />
    </VBox>
    
</VBox>